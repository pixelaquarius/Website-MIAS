<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ứng Dụng Bói Bài Tarot</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <script defer src="/tarot/script.js?v=2"></script>
</head>
<body>
  <header class="app-header">
    <h1>ỨNG DỤNG BÓI BÀI TAROT</h1>
    <p>Giao diện ma thuật, ảnh lá bài thật, mượt trên máy tính & điện thoại.</p>
  </header>

  <main class="container">
    <!-- Thanh điều khiển -->
    <section class="controls card">
      <div class="spread-pills">
        <span>Số lá/lượt:</span>
        <label><input type="radio" name="spread" value="1" checked> 1 Lá</label>
        <label><input type="radio" name="spread" value="3"> 3 Lá</label>
        <label><input type="radio" name="spread" value="5"> 5 Lá</label>
      </div>

      <div class="actions">
        <button id="btnDraw" class="btn primary">Bóc Bài</button>
        <button id="btnComplete" class="btn" disabled>Hoàn Tất</button>
        <button id="btnDeepen" class="btn info" disabled>Coi Sâu Thêm</button>
        <button id="btnCombine" class="btn success" disabled>Kết hợp & Tổng quan</button>
        <button id="btnNew" class="btn danger" disabled>Bốc Bài Mới</button>
      </div>
      <div id="banner" class="banner hidden"></div>
    </section>

    <!-- Khu vực hiển thị -->
    <section class="stage card">
      <div id="currentCard" class="tarot-card">
        <div class="card-back"></div>
        <img id="cardImage" alt="" class="hidden"/>
        <div id="cardTitle" class="card-title hidden"></div>
      </div>

      <div id="currentRow" class="mini-row"></div>
    </section>

    <!-- Đọc bài bằng AI -->
    <section class="ai card">
      <h2>Đọc Bài Bằng AI</h2>

      <div class="question-mode">
        <label class="pill"><input type="radio" name="qmode" value="manual" checked> Tự nhập câu hỏi</label>
        <label class="pill"><input type="radio" name="qmode" value="guided"> Chọn theo hướng dẫn</label>
      </div>

      <div id="manualBox" class="manual-box">
        <textarea id="txtQuestion" placeholder="Nhập câu hỏi (ví dụ: Trong 3 tháng tới, công việc của tôi sẽ tiến triển thế nào? Tôi cần lưu ý điều gì?)"></textarea>
        <div class="suggest">
          Gợi ý cách đặt câu hỏi: <em>[Bối cảnh] + [Chủ đề] + [khung thời gian] + [điều muốn đạt] + [điều lo ngại]</em>. <br/>
          Ví dụ: “Hiện tôi đang cân nhắc đổi việc, <b>trong 3 tháng tới</b> triển vọng ra sao? <b>Tôi cần hành động gì</b> và <b>rủi ro cần tránh</b> là gì?”
        </div>
      </div>

      <div id="guidedBox" class="guided-box hidden">
        <select id="selTopic">
          <option value="">-- Chủ đề --</option>
          <option>Tình yêu & mối quan hệ</option>
          <option>Sự nghiệp & công việc</option>
          <option>Tài chính & tiền bạc</option>
          <option>Sức khỏe & tinh thần</option>
          <option>Phát triển cá nhân</option>
          <option>Gia đình & bạn bè</option>
          <option>Quyết định quan trọng</option>
        </select>
        <select id="selTime">
          <option value="">-- Thời gian --</option>
          <option>hiện tại</option>
          <option>trong 3 tháng tới</option>
          <option>trong 6 tháng tới</option>
          <option>trong 1 năm tới</option>
          <option>tương lai xa</option>
        </select>
        <input id="txtExtra" placeholder="Câu hỏi bổ sung (nếu có)"/>
      </div>

      <div class="ai-actions">
        <button id="btnAskAI" class="btn gold" disabled>
          <span class="w">Nhận Giải Thích Từ AI</span>
          <span class="spinner hidden" id="aiSpinner"></span>
        </button>
      </div>

      <div id="aiErr" class="error hidden"></div>

      <div id="aiBlocks" class="ai-blocks hidden">
        <div id="aiCards" class="ai-cards"></div>
        <div class="ai-text">
          <h3>Tổng quan</h3>
          <p id="aiOverall"></p>
        </div>
        <div class="ai-text">
          <h3>Gợi ý bước tiếp theo</h3>
          <p id="aiNext"></p>
        </div>
      </div>
    </section>

    <!-- Lịch sử -->
    <section class="history card">
      <h2>Lịch Sử Các Lượt Bóc</h2>
      <div id="historyWrap" class="history-wrap"></div>
    </section>
  </main>

  <!-- Modal lịch sử chi tiết -->
  <div id="modal" class="modal hidden">
    <div class="modal-body">
      <button id="modalClose" class="btn small">Đóng</button>
      <h3 id="modalTitle"></h3>
      <div id="modalContent"></div>
    </div>
  </div>

  <script src="./script.js"></script>
</body>
</html>
