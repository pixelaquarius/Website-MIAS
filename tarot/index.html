<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ứng Dụng Bói Bài Tarot</title>

  <!-- Fonts + Tailwind CDN -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- App styles -->
  <link rel="stylesheet" href="./styles.css"/>
</head>
<body class="min-h-screen bg-gradient-to-b from-[#0b0f1a] via-[#0e1527] to-[#0b0f1a] text-slate-100">

  <!-- background stars + aura -->
  <div class="fixed inset-0 -z-10">
    <div class="stars"></div>
    <div class="aura"></div>
  </div>

  <main class="container mx-auto px-4 py-10 max-w-5xl">
    <!-- Header -->
    <header class="text-center mb-8">
      <h1 class="font-[Cinzel] text-4xl sm:text-5xl font-bold tracking-wide">
        Ứng Dụng Bói Bài Tarot
      </h1>
      <p class="mt-2 text-slate-300">Giao diện ma thuật, ảnh lá bài thật, đủ tính năng nâng cao.</p>
    </header>

    <!-- Controls -->
    <section class="glass p-4 sm:p-6 rounded-2xl mb-6">
      <div class="flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 justify-center">
        <div class="flex items-center gap-3 flex-wrap justify-center">
          <span class="label">Số lá/lượt:</span>
          <label class="chip"><input type="radio" name="spread-type" value="1" checked> 1 Lá</label>
          <label class="chip"><input type="radio" name="spread-type" value="3"> 3 Lá</label>
          <label class="chip"><input type="radio" name="spread-type" value="5"> 5 Lá</label>
        </div>

        <div class="flex items-center gap-3 flex-wrap justify-center">
          <button id="draw-btn" class="btn">Bóc Bài</button>
          <button id="complete-btn" class="btn btn-muted" disabled>Hoàn Tất</button>
          <button id="deepen-btn" class="btn btn-accent" disabled>Coi Sâu Thêm</button>
          <button id="merge-btn" class="btn btn-merge" disabled>Kết hợp & Tổng quan</button>
          <button id="new-spread-btn" class="btn btn-danger" disabled>Bóc Bài Mới</button>
        </div>
      </div>

      <p class="hint mt-3 text-center">Bạn có thể “Coi sâu thêm” nhiều lần. Nếu đổi chủ đề, cứ hỏi mới — không cần bóc lại.</p>
      <div id="msg" class="msg hidden"></div>
    </section>

    <!-- Current spread display -->
    <section class="glass p-4 sm:p-6 rounded-2xl mb-6">
      <div id="big-card" class="big-card">
        <div class="card-back">BÓC<br/>BÀI</div>
        <img id="big-card-img" alt="" class="hidden"/>
        <div id="big-card-title" class="card-title hidden"></div>
      </div>

      <div id="current-row" class="current-row"></div>
    </section>

    <!-- AI reading -->
    <section class="glass p-4 sm:p-6 rounded-2xl mb-8">
      <h2 class="section-title">Đọc Bài Bằng AI</h2>

      <div class="flex flex-wrap items-center gap-4 mb-3">
        <label class="chip"><input type="radio" name="q-type" value="manual" checked> Tự nhập câu hỏi</label>
        <label class="chip"><input type="radio" name="q-type" value="guided"> Chọn theo hướng dẫn</label>
      </div>

      <div id="manual-box" class="w-full">
        <textarea id="question" class="textarea" placeholder="Nhập câu hỏi của bạn..."></textarea>
      </div>

      <div id="guided-box" class="hidden grid gap-3 sm:grid-cols-3">
        <select id="topic" class="select">
          <option value="">-- Chủ đề --</option>
          <option>Tình yêu và mối quan hệ</option>
          <option>Sự nghiệp và công việc</option>
          <option>Tài chính và tiền bạc</option>
          <option>Sức khỏe và tinh thần</option>
          <option>Phát triển cá nhân</option>
          <option>Gia đình và bạn bè</option>
          <option>Học tập và kiến thức</option>
          <option>Quyết định quan trọng</option>
          <option>Khác</option>
        </select>
        <select id="timeframe" class="select">
          <option value="">-- Thời gian --</option>
          <option>hiện tại</option>
          <option>trong 3 tháng tới</option>
          <option>trong 6 tháng tới</option>
          <option>trong 1 năm tới</option>
          <option>trong tương lai xa</option>
        </select>
        <input id="extra" class="select" placeholder="Câu hỏi bổ sung (nếu có)"/>
      </div>

      <div class="text-center mt-4">
        <button id="ask-ai-btn" class="btn btn-gold" disabled>Nhận Giải Thích Từ AI</button>
      </div>

      <!-- AI Responses -->
      <div id="ai-loading" class="ai-loading hidden">Đang phân tích...</div>

      <div id="ai-cards" class="ai-cards hidden">
        <h3 class="sub-title">Giải thích từng lá</h3>
        <div id="ai-cards-row" class="ai-cards-row"></div>
      </div>

      <div id="ai-overall" class="ai-panel hidden">
        <h3 class="sub-title">Tổng Quan</h3>
        <p id="overall-text"></p>
      </div>

      <div id="ai-next" class="ai-panel hidden">
        <h3 class="sub-title">Gợi ý & Bước tiếp theo</h3>
        <p id="next-text"></p>
      </div>
    </section>

    <!-- History -->
    <section class="glass p-4 sm:p-6 rounded-2xl">
      <h2 class="section-title">Lịch Sử Các Lượt Bóc</h2>
      <div id="history" class="history"></div>
    </section>
  </main>

  <!-- History Modal -->
  <dialog id="history-modal" class="modal">
    <div class="modal-box">
      <div class="flex items-start justify-between gap-4">
        <h3 class="text-xl font-semibold font-[Cinzel]">Chi tiết lượt bóc</h3>
        <button id="close-modal" class="btn btn-danger px-3">Đóng</button>
      </div>
      <div id="modal-content" class="mt-4 space-y-6"></div>
    </div>
  </dialog>

  <!-- App script -->
  <script src="./script.js"></script>
</body>
</html>
